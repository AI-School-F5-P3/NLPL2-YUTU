<!DOCTYPE html>
<html>
<head>
    <title>Detección de Discurso de Odio en YouTube</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2>Detector de Comentarios de Odio en YouTube</h2>
        
        <!-- Entrada para la URL del video -->
        <div class="mb-3">
            <label for="video-url" class="form-label">Enlace del Video</label>
            <input type="text" class="form-control" id="video-url" placeholder="Ingresa el enlace del video">
        </div>
        
        <!-- Botón para analizar -->
        <button class="btn btn-primary" onclick="analyzeVideo()">Analizar</button>
        
        <!-- Área para mostrar los resultados -->
        <div id="results" class="mt-5"></div>
    </div>
    
    <script>
        async function analyzeVideo() {
            const videoUrl = document.getElementById('video-url').value;

            if (!videoUrl) {
                alert('Por favor, ingresa un enlace de video.');
                return;
            }

            // Enviar solicitud al servidor para análisis
            const formData = new FormData();
            formData.append('video_url', videoUrl);

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    body: formData
                });

                const resultsDiv = document.getElementById('results');

                if (response.ok) {
                    const data = await response.json();
                    
                    // Mostrar los resultados en un formato más legible
                    let resultsHtml = '<h4>Resultados:</h4>';
                    data.forEach(comment => {
                        resultsHtml += `
                            <div class="alert ${comment.Sentiment === 'Negative' ? 'alert-danger' : 'alert-success'}">
                                <strong>${comment.Message}</strong><br>
                                ${comment.Cleaned_Text}
                            </div>`;
                    });

                    resultsDiv.innerHTML = resultsHtml;
                } else {
                    resultsDiv.innerHTML = '<div class="alert alert-warning">No se encontraron comentarios o hubo un error en el análisis.</div>';
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('results').innerHTML = '<div class="alert alert-danger">Error al analizar el video.</div>';
            }
        }
    </script>
</body>
</html>

